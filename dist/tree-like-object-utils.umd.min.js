!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).TreeObjectUtils={})}(this,(function(e){"use strict";function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function r(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return n(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?n(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function i(e){var n=t(e);return e instanceof Array?"array":null===e?"null":n}function a(e,n,r){return e.findIndex((function(e){return e[n]===r}))}function c(e){return e instanceof Array?e:e.replace(/\[(\d+)\]/g,".$1").split(".").filter((function(e){return""!==e}))}function u(e,n,r){if(e instanceof Array)return e;var t=new RegExp(r,"gi");return e.replace(t,"").replace(/\[(\d+)\]/g,".$1").split(n).filter((function(e){return""!==e}))}function f(e,n){return c(n).reduce((function(e,n){return e?e[n]:e}),e)}function l(e,n,r){return c(n).reduce((function(e,n,t,o){if(t+1!==o.length)return e[n]?e[n]:e[n]=isFinite(o[t+1])?[]:{};e[n]=r}),e),e}function d(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=r||{},i=t.pathSeparator,c=void 0===i?".":i,f=t.childNameKey,l=void 0===f?"name":f,d=t.childrenName,y=void 0===d?"children":d,v=function(e,n){for(var r=0;r<n;r++){var t;e.push((o(t={},l,void 0),o(t,y,[]),t))}},h=u(n,c,y);return h.reduce((function(e,n){if(""===n)return e;var r=e[y]=e[y]||[],t=isFinite(n)?n:a(r,l,n);if(-1===t){var i,c=(o(i={},l,n),o(i,y,[]),i);return r.push(c),c}return t>=r.length&&v(r,t-r.length+1),r[t]}),e)}function y(e,n){for(var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.judgeIsLeaf,a=void 0===i?null:i,c=o.skipLeaf,u=void 0===c||c,f=[{node:{key:"",type:"root",value:e},pathArray:[]}],l=function(e){var o=f[e],i=o.node,c=o.pathArray,l="object"!==t(i.value)||a instanceof Function&&a(i,i.pathArray);return i.type=i.type||(l?"leaf":"branch"),l&&u?"continue":n(i,c)?{v:void 0}:l?"continue":void Object.keys(i.value).forEach((function(e){f.push({node:{key:e,value:i.value[e],type:""},pathArray:[].concat(r(c),[i])})}))},d=0;d<f.length;d++){var y=l(d);if("continue"!==y&&"object"===t(y))return y.v}}function v(e,n){for(var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o||{},a=i.childrenName,c=void 0===a?"children":a,u=i.childNameKey,f=void 0===u?"name":u,l=[{node:{key:"",type:"root",value:e},pathArray:[]}],d=function(e){var o=l[e],i=o.node,a=o.pathArray;return n(i,a)?{v:void 0}:"leaf"===i.type?"continue":void(i.value[c]||[]).forEach((function(e,n){var o={key:"object"===t(e)&&e[f]||"".concat(n),value:e,type:"object"===t(e)&&e[c]instanceof Array&&e[c]&&e[c].length?"branch":"leaf"};l.push({node:o,pathArray:[].concat(r(a),[i])})}))},y=0;y<l.length;y++){var v=d(y);if("continue"!==v&&"object"===t(v))return v.v}}e.createObjectByTree=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n||{},o=t.childNameKey,i=void 0===o?"name":o,a=t.childrenName,c=void 0===a?"children":a,u=t.branchProps,d=void 0===u?["props"]:u,y={},h="Illegal Tree Object, all children node must contains '".concat(i,"' property"),p=function(e,n){if(e.key&&isFinite(e.key))throw new Error(h);var t=[].concat(r(n),[e]).map((function(e){return e.key})).filter((function(e){return""!==e})),o=f(y,t)||l(y,t,{})&&f(y,t);d.forEach((function(n){return o[n]=e.value[n]}))};return v(e,p,{childrenName:c,childNameKey:i}),y},e.createTreeByObject=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n||{},o=t.childNameKey,i=void 0===o?"name":o,a=t.childrenName,c=void 0===a?"children":a,u=t.branchProps,f=void 0===u?["props"]:u,l={},v=function(e,n){e.name=n.key,f.forEach((function(r){return e[r]=n.value[r]}))},h=function(e){return f.includes(e.key)},p=function(e,n){var t=d(l,[].concat(r(n),[e]).map((function(e){return e.key})),{childNameKey:i,childrenName:c});v(t,e)};return y(e,p,{judgeIsLeaf:h,skipLeaf:!0}),l},e.ensureTreePath=d,e.findTree=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=null,o=n;return"string"==typeof n&&(o=function(e){return e.value.name===n}),v(e,(function(e,n){if(o(e,n))return t=e,!0}),r),t},e.getFromObject=f,e.getFromTree=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=r||{},o=t.pathSeparator,i=void 0===o?".":o,c=t.childNameKey,f=void 0===c?"name":c,l=t.childrenName,d=void 0===l?"children":l,y=u(n,i,d);return y.reduce((function(e,n){if(!e)return e;var r=e[d]||[];return r[isFinite(n)?n:a(r,f,n)]}),e)},e.getPathValueMapArray=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n||{},o=t.separator,i=void 0===o?".":o,a=t.judgeIsValue,c={judgeIsLeaf:a,skipLeaf:!1},u=function(e,n){if("leaf"===e.type){var t=[].concat(r(n),[e]).map((function(e){return e.key})).filter((function(e){return e})).join(i);f.push({path:t,value:e.value})}},f=[];return y(e,u,c),f},e.mergeTrees=function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n||{},o=t.childrenName,a=void 0===o?"children":o,c=t.childNameKey,u=void 0===c?"name":c,f=t.mergeFn,l=f||function(e,n){Object.keys(n).filter((function(e){return![a].includes(e)})).forEach((function(t){switch(i(e[t])){case"object":Object.assign(e[t],n[t]);break;case"array":e[t]=r(n[t]instanceof Array?n[t]:[]);default:e[t]=n[t]}}))},y=arguments.length,h=new Array(y>2?y-2:0),p=2;p<y;p++)h[p-2]=arguments[p];return h.forEach((function(n){v(n,(function(n,t){var o=d(e,[].concat(r(t),[n]).map((function(e){return e.key})),{childNameKey:u,childrenName:a});l(o,n.value)}),{childNameKey:u,childrenName:a})})),e},e.setToObject=l,e.walkObject=y,e.walkTree=v,Object.defineProperty(e,"__esModule",{value:!0})}));
