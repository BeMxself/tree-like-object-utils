"use strict";function e(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function n(n){return function(n){if(Array.isArray(n))return e(n)}(n)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(n)||function(n,r){if(n){if("string"==typeof n)return e(n,r);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?e(n,r):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(e){var n=r(e);return e instanceof Array?"array":null===e?"null":n}function i(e,n,r){return e.findIndex((function(e){return e[n]===r}))}function a(e){return e instanceof Array?e:e.replace(/\[(\d+)\]/g,".$1").split(".").filter((function(e){return""!==e}))}function c(e,n,r){if(e instanceof Array)return e;var t=new RegExp(r,"gi");return e.replace(t,"").replace(/\[(\d+)\]/g,".$1").split(n).filter((function(e){return""!==e}))}function u(e,n){return a(n).reduce((function(e,n){return e?e[n]:e}),e)}function f(e,n,r){return a(n).reduce((function(e,n,t,o){if(t+1!==o.length)return e[n]?e[n]:e[n]=isFinite(o[t+1])?[]:{};e[n]=r}),e),e}function l(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r||{},a=o.pathSeparator,u=void 0===a?".":a,f=o.childNameKey,l=void 0===f?"name":f,d=o.childrenName,v=void 0===d?"children":d,y=function(e,n){for(var r=0;r<n;r++){var o;e.push((t(o={},l,void 0),t(o,v,[]),o))}},p=c(n,u,v);return p.reduce((function(e,n){if(""===n)return e;var r=e[v]=e[v]||[],o=isFinite(n)?n:i(r,l,n);if(-1===o){var a,c=(t(a={},l,n),t(a,v,[]),a);return r.push(c),c}return o>=r.length&&y(r,o-r.length+1),r[o]}),e)}function d(e,t){for(var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.judgeIsLeaf,a=void 0===i?null:i,c=o.skipLeaf,u=void 0===c||c,f=[{node:{key:"",type:"root",value:e},pathArray:[]}],l=function(e){var o=f[e],i=o.node,c=o.pathArray,l="object"!==r(i.value)||a instanceof Function&&a(i,i.pathArray);return i.type=i.type||(l?"leaf":"branch"),l&&u?"continue":t(i,c)?{v:void 0}:l?"continue":void Object.keys(i.value).forEach((function(e){f.push({node:{key:e,value:i.value[e],type:""},pathArray:[].concat(n(c),[i])})}))},d=0;d<f.length;d++){var v=l(d);if("continue"!==v&&"object"===r(v))return v.v}}function v(e,t){for(var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o||{},a=i.childrenName,c=void 0===a?"children":a,u=i.childNameKey,f=void 0===u?"name":u,l=[{node:{key:"",type:"root",value:e},pathArray:[]}],d=function(e){var o=l[e],i=o.node,a=o.pathArray;return t(i,a)?{v:void 0}:"leaf"===i.type?"continue":void(i.value[c]||[]).forEach((function(e,t){var o={key:"object"===r(e)&&e[f]||"".concat(t),value:e,type:"object"===r(e)&&e[c]instanceof Array&&e[c]&&e[c].length?"branch":"leaf"};l.push({node:o,pathArray:[].concat(n(a),[i])})}))},v=0;v<l.length;v++){var y=d(v);if("continue"!==y&&"object"===r(y))return y.v}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createObjectByTree=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r||{},o=t.childNameKey,i=void 0===o?"name":o,a=t.childrenName,c=void 0===a?"children":a,l=t.branchProps,d=void 0===l?["props"]:l,y={},p="Illegal Tree Object, all children node must contains '".concat(i,"' property"),h=function(e,r){if(e.key&&isFinite(e.key))throw new Error(p);var t=[].concat(n(r),[e]).map((function(e){return e.key})).filter((function(e){return""!==e})),o=u(y,t)||f(y,t,{})&&u(y,t);d.forEach((function(n){return o[n]=e.value[n]}))};return v(e,h,{childrenName:c,childNameKey:i}),y},exports.createTreeByObject=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r||{},o=t.childNameKey,i=void 0===o?"name":o,a=t.childrenName,c=void 0===a?"children":a,u=t.branchProps,f=void 0===u?["props"]:u,v={},y=function(e,n){e.name=n.key,f.forEach((function(r){return e[r]=n.value[r]}))},p=function(e){return f.includes(e.key)},h=function(e,r){var t=l(v,[].concat(n(r),[e]).map((function(e){return e.key})),{childNameKey:i,childrenName:c});y(t,e)};return d(e,h,{judgeIsLeaf:p,skipLeaf:!0}),v},exports.ensureTreePath=l,exports.findTree=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=null,o=n;return"string"==typeof n&&(o=function(e){return e.value.name===n}),v(e,(function(e,n){if(o(e,n))return t=e,!0}),r),t},exports.getFromObject=u,exports.getFromTree=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=r||{},o=t.pathSeparator,a=void 0===o?".":o,u=t.childNameKey,f=void 0===u?"name":u,l=t.childrenName,d=void 0===l?"children":l,v=c(n,a,d);return v.reduce((function(e,n){if(!e)return e;var r=e[d]||[];return r[isFinite(n)?n:i(r,f,n)]}),e)},exports.getPathValueMapArray=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r||{},o=t.separator,i=void 0===o?".":o,a=t.judgeIsValue,c={judgeIsLeaf:a,skipLeaf:!1},u=function(e,r){if("leaf"===e.type){var t=[].concat(n(r),[e]).map((function(e){return e.key})).filter((function(e){return e})).join(i);f.push({path:t,value:e.value})}},f=[];return d(e,u,c),f},exports.mergeTrees=function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r||{},i=t.childrenName,a=void 0===i?"children":i,c=t.childNameKey,u=void 0===c?"name":c,f=t.mergeFn,d=f||function(e,r){Object.keys(r).filter((function(e){return![a].includes(e)})).forEach((function(t){switch(o(e[t])){case"object":Object.assign(e[t],r[t]);break;case"array":e[t]=n(r[t]instanceof Array?r[t]:[]);default:e[t]=r[t]}}))},y=arguments.length,p=new Array(y>2?y-2:0),h=2;h<y;h++)p[h-2]=arguments[h];return p.forEach((function(r){v(r,(function(r,t){var o=l(e,[].concat(n(t),[r]).map((function(e){return e.key})),{childNameKey:u,childrenName:a});d(o,r.value)}),{childNameKey:u,childrenName:a})})),e},exports.setToObject=f,exports.walkObject=d,exports.walkTree=v;
